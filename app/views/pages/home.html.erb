<div class="container" data-controller="parallax" data-action="scroll@window->parallax#handleScroll">
  <div class="gradient">
    <%# Enhanced Hero Section %>
    <div class="hero-section" style="position: relative; min-height: 85vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 90px 20px 60px 20px; overflow: hidden;">

      <%# Animated background elements %>
      <div class="hero-bg-elements" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; overflow: hidden;">
        <div class="floating-note" style="position: absolute; top: 15%; left: 10%; animation: float 6s ease-in-out infinite;">
          <i class="fa-solid fa-music" style="font-size: 2rem; color: rgba(200, 233, 56, 0.15);"></i>
        </div>
        <div class="floating-note" style="position: absolute; top: 25%; right: 15%; animation: float 8s ease-in-out infinite 1s;">
          <i class="fa-solid fa-guitar" style="font-size: 2.5rem; color: rgba(233, 54, 173, 0.12);"></i>
        </div>
        <div class="floating-note" style="position: absolute; bottom: 30%; left: 8%; animation: float 7s ease-in-out infinite 0.5s;">
          <i class="fa-solid fa-drum" style="font-size: 2rem; color: rgba(251, 191, 36, 0.1);"></i>
        </div>
        <div class="floating-note" style="position: absolute; top: 40%; right: 8%; animation: float 9s ease-in-out infinite 2s;">
          <i class="fa-solid fa-microphone" style="font-size: 1.8rem; color: rgba(200, 233, 56, 0.12);"></i>
        </div>
        <div class="floating-note" style="position: absolute; bottom: 20%; right: 20%; animation: float 6.5s ease-in-out infinite 1.5s;">
          <i class="fa-solid fa-headphones" style="font-size: 2.2rem; color: rgba(233, 54, 173, 0.1);"></i>
        </div>
      </div>

      <%# Main hero content %>
      <div class="hero-content" data-parallax-target="bannerText" style="position: relative; z-index: 2; text-align: center; max-width: 900px;">

        <%# Animated logo/brand %>
        <div class="hero-brand" style="margin-bottom: 24px;">
          <span style="display: inline-block; background: linear-gradient(135deg, #C8E938 0%, #9cbd2e 50%, #C8E938 100%); background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 0.9rem; font-weight: 700; letter-spacing: 4px; text-transform: uppercase; animation: shimmer 3s linear infinite;">
            Welcome to
          </span>
        </div>

        <%# Main title with Bebas Neue font %>
        <div class="hero-title-container" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 20px;">
          <div style="font-family: 'Bebas Neue', Impact, 'Arial Black', sans-serif; font-size: clamp(3rem, 14vw, 10rem); font-weight: 400; line-height: 0.85; letter-spacing: 4px; text-transform: uppercase; color: #000; text-shadow: 0 0 60px rgba(200, 233, 56, 0.5), 0 0 120px rgba(200, 233, 56, 0.3);">
            KOKAI
          </div>
          <div style="font-family: 'Bebas Neue', Impact, 'Arial Black', sans-serif; font-size: clamp(3rem, 14vw, 10rem); font-weight: 400; line-height: 0.85; letter-spacing: 4px; text-transform: uppercase; color: #000; text-shadow: 0 0 60px rgba(200, 233, 56, 0.5), 0 0 120px rgba(200, 233, 56, 0.3);">
            SOUNDWORKS
          </div>
        </div>

        <%# Tagline %>
        <p style="font-size: clamp(1.2rem, 3vw, 1.8rem); color: #fff; font-weight: 300; margin: 0 0 12px 0; letter-spacing: 1px;">
          From Bedroom to <span style="color: #C8E938; font-weight: 600;">Breakthrough</span>
        </p>

        <%# Subtext with animated typing effect look %>
        <div class="hero-tagline-row" style="display: flex; justify-content: center; gap: 32px; flex-wrap: wrap; margin: 24px 0 40px 0;">
          <div style="display: flex; align-items: center; gap: 8px;">
            <i class="fa-solid fa-users" style="color: #C8E938;"></i>
            <span style="color: #aaa; font-size: 1rem;">Build Bands</span>
          </div>
          <div style="display: flex; align-items: center; gap: 8px;">
            <i class="fa-solid fa-calendar-check" style="color: #E936AD;"></i>
            <span style="color: #aaa; font-size: 1rem;">Book Gigs</span>
          </div>
          <div style="display: flex; align-items: center; gap: 8px;">
            <i class="fa-solid fa-location-dot" style="color: #fbbf24;"></i>
            <span style="color: #aaa; font-size: 1rem;">Fill Venues</span>
          </div>
        </div>

        <%# CTA Buttons %>
        <div class="hero-cta-row" style="display: flex; justify-content: center; gap: 16px; flex-wrap: wrap; margin-bottom: 48px;">
          <%= link_to new_user_registration_path, style: "display: inline-flex; align-items: center; gap: 10px; background: linear-gradient(135deg, #C8E938 0%, #9cbd2e 100%); color: #171717; font-weight: 700; padding: 16px 36px; border-radius: 50px; text-decoration: none; font-size: 1.1rem; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(200, 233, 56, 0.3);" do %>
            <i class="fa-solid fa-rocket"></i> Get Started Free
          <% end %>
          <%= link_to musicians_path, style: "display: inline-flex; align-items: center; gap: 10px; background: transparent; color: #fff; font-weight: 600; padding: 16px 36px; border-radius: 50px; text-decoration: none; font-size: 1.1rem; border: 2px solid rgba(255,255,255,0.3); transition: all 0.3s ease;" do %>
            <i class="fa-solid fa-compass"></i> Explore
          <% end %>
        </div>

        <%# Stats/Social proof %>
        <div class="hero-stats-row" style="display: flex; justify-content: center; gap: 48px; flex-wrap: wrap;">
          <div style="text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #C8E938;"><%= Musician.count %>+</div>
            <div style="font-size: 0.85rem; color: #666; text-transform: uppercase; letter-spacing: 1px;">Musicians</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #E936AD;"><%= Band.count %>+</div>
            <div style="font-size: 0.85rem; color: #666; text-transform: uppercase; letter-spacing: 1px;">Bands</div>
          </div>
          <div style="text-align: center;">
            <div style="font-size: 2rem; font-weight: 700; color: #fbbf24;"><%= Venue.count %>+</div>
            <div style="font-size: 0.85rem; color: #666; text-transform: uppercase; letter-spacing: 1px;">Venues</div>
          </div>
        </div>
      </div>

      <%# Scroll indicator %>
      <div style="position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); animation: bounce 2s infinite;">
        <i class="fa-solid fa-chevron-down" style="color: rgba(255,255,255,0.4); font-size: 1.5rem;"></i>
      </div>
    </div>

    <style>
      @keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(5deg); }
      }

      @keyframes shimmer {
        0% { background-position: 0% center; }
        100% { background-position: 200% center; }
      }

      @keyframes gradient-flow {
        0% { background-position: 0% center; }
        50% { background-position: 100% center; }
        100% { background-position: 0% center; }
      }

      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
        40% { transform: translateX(-50%) translateY(-10px); }
        60% { transform: translateX(-50%) translateY(-5px); }
      }

      .hero-section a:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(200, 233, 56, 0.4) !important;
      }

      .hero-section a[style*="transparent"]:hover {
        background: rgba(255,255,255,0.1) !important;
        border-color: rgba(255,255,255,0.5) !important;
        box-shadow: 0 8px 30px rgba(255,255,255,0.1) !important;
      }

      @media (max-width: 768px) {
        .hero-section {
          min-height: auto !important;
          padding: 20px 16px 24px !important;
        }

        .hero-bg-elements .floating-note {
          display: none;
        }

        .hero-brand {
          margin-bottom: 12px !important;
        }

        .hero-brand span {
          font-size: 0.7rem !important;
          letter-spacing: 2px !important;
        }

        .hero-title-container > div {
          font-family: 'Bebas Neue', Impact, 'Arial Black', sans-serif !important;
          font-size: 3rem !important;
          line-height: 0.9 !important;
          letter-spacing: 2px !important;
        }

        .hero-content p {
          font-size: 1rem !important;
          margin-bottom: 8px !important;
        }

        .hero-section a {
          width: 100%;
          justify-content: center;
          padding: 12px 24px !important;
          font-size: 0.95rem !important;
        }

        .hero-tagline-row {
          flex-direction: column !important;
          gap: 8px !important;
          margin: 16px 0 24px 0 !important;
        }

        .hero-tagline-row > div {
          justify-content: flex-start;
        }

        .hero-tagline-row span {
          font-size: 0.9rem !important;
        }

        .hero-cta-row {
          flex-direction: column !important;
          width: 100% !important;
          gap: 10px !important;
          margin-bottom: 32px !important;
        }

        .hero-cta-row a {
          width: 100% !important;
        }

        .hero-stats-row {
          gap: 24px !important;
        }

        .hero-stats-row > div > div:first-child {
          font-size: 1.4rem !important;
        }

        .hero-stats-row > div > div:last-child {
          font-size: 0.7rem !important;
        }
      }

      @media (max-width: 480px) {
        .hero-title-container > div {
          font-size: 2.5rem !important;
        }

        .hero-stats-row {
          gap: 16px !important;
        }

        .hero-stats-row > div > div:first-child {
          font-size: 1.2rem !important;
        }
      }

      /* Signup cards mobile */
      @media (max-width: 768px) {
        .hero-cards .row {
          flex-direction: column !important;
          gap: 16px !important;
        }

        .hero-cards .col-10,
        .hero-cards .col-md-3 {
          width: 100% !important;
          max-width: 100% !important;
          flex: 0 0 100% !important;
          padding: 0 !important;
          margin: 0 !important;
        }

        .signup-card {
          margin: 0 !important;
        }

        .carousels .row {
          flex-direction: column !important;
        }

        .carousels .col-8,
        .carousels .col-md-3 {
          width: 100% !important;
          max-width: 100% !important;
          flex: 0 0 100% !important;
        }
      }
    </style>

    <%# MAINSTAGE Spotlight %>
    <%= render "mainstage/homepage_spotlight" %>

    <div class="hero-cards justify-content-center m-4">
      <h2 style="color: #fff; text-align: center; margin-bottom: 32px; font-size: 1.8rem;">Join the Community</h2>
      <div class="row justify-content-center" style="gap: 20px;">
        <%# Musician Card %>
        <div class="col-10 col-md-3" style="display: flex;">
          <div class="signup-card" style="background: linear-gradient(145deg, #1e1e1e 0%, #252525 100%); border-radius: 20px; padding: 32px 24px; text-align: center; border: 1px solid #333; transition: all 0.3s ease; display: flex; flex-direction: column; width: 100%;">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #C8E938 0%, #9cbd2e 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
              <i class="fa-solid fa-guitar" style="font-size: 2rem; color: #171717;"></i>
            </div>
            <h3 style="color: #fff; font-size: 1.4rem; margin-bottom: 12px;">Musicians</h3>
            <p style="color: #888; font-size: 0.95rem; line-height: 1.6; margin-bottom: 20px;">
              Showcase your talent, connect with other musicians, and find your next band or collaboration.
            </p>
            <ul style="text-align: left; color: #aaa; font-size: 0.85rem; margin-bottom: 24px; padding-left: 20px; flex-grow: 1;">
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #C8E938; margin-right: 8px;"></i> Create your profile</li>
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #C8E938; margin-right: 8px;"></i> Upload media & shorts</li>
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #C8E938; margin-right: 8px;"></i> Get discovered</li>
            </ul>
            <%= link_to new_user_registration_path, class: "btn", style: "background: #C8E938; color: #171717; font-weight: 600; padding: 12px 28px; border-radius: 10px; width: 100%; margin-top: auto;" do %>
              <i class="fa-solid fa-user-plus me-2"></i> Sign Up Free
            <% end %>
          </div>
        </div>

        <%# Bandleader Card %>
        <div class="col-10 col-md-3" style="display: flex;">
          <div class="signup-card" style="background: linear-gradient(145deg, #1e1e1e 0%, #252525 100%); border-radius: 20px; padding: 32px 24px; text-align: center; border: 1px solid #333; transition: all 0.3s ease; display: flex; flex-direction: column; width: 100%;">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #E936AD 0%, #c42d93 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
              <i class="fa-solid fa-users" style="font-size: 2rem; color: #fff;"></i>
            </div>
            <h3 style="color: #fff; font-size: 1.4rem; margin-bottom: 12px;">Bandleaders</h3>
            <p style="color: #888; font-size: 0.95rem; line-height: 1.6; margin-bottom: 20px;">
              Build your dream band, manage members, and book gigs together as a unit.
            </p>
            <ul style="text-align: left; color: #aaa; font-size: 0.85rem; margin-bottom: 24px; padding-left: 20px; flex-grow: 1;">
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #E936AD; margin-right: 8px;"></i> Create & manage bands</li>
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #E936AD; margin-right: 8px;"></i> Invite musicians</li>
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #E936AD; margin-right: 8px;"></i> Book venues</li>
            </ul>
            <%= link_to new_user_registration_path, class: "btn", style: "background: #E936AD; color: #fff; font-weight: 600; padding: 12px 28px; border-radius: 10px; width: 100%; margin-top: auto;" do %>
              <i class="fa-solid fa-user-plus me-2"></i> Sign Up Free
            <% end %>
          </div>
        </div>

        <%# Venue Owner Card %>
        <div class="col-10 col-md-3" style="display: flex;">
          <div class="signup-card" style="background: linear-gradient(145deg, #1e1e1e 0%, #252525 100%); border-radius: 20px; padding: 32px 24px; text-align: center; border: 1px solid #333; transition: all 0.3s ease; display: flex; flex-direction: column; width: 100%;">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
              <i class="fa-solid fa-location-dot" style="font-size: 2rem; color: #171717;"></i>
            </div>
            <h3 style="color: #fff; font-size: 1.4rem; margin-bottom: 12px;">Venue Owners</h3>
            <p style="color: #888; font-size: 0.95rem; line-height: 1.6; margin-bottom: 20px;">
              List your venue, discover local talent, and fill your calendar with live music.
            </p>
            <ul style="text-align: left; color: #aaa; font-size: 0.85rem; margin-bottom: 24px; padding-left: 20px; flex-grow: 1;">
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #fbbf24; margin-right: 8px;"></i> List your venue</li>
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #fbbf24; margin-right: 8px;"></i> Post gig opportunities</li>
              <li style="margin-bottom: 8px;"><i class="fa-solid fa-check" style="color: #fbbf24; margin-right: 8px;"></i> Find local bands</li>
            </ul>
            <%= link_to new_user_registration_path, class: "btn", style: "background: #fbbf24; color: #171717; font-weight: 600; padding: 12px 28px; border-radius: 10px; width: 100%; margin-top: auto;" do %>
              <i class="fa-solid fa-user-plus me-2"></i> Sign Up Free
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <style>
      .signup-card:hover {
        transform: translateY(-8px);
        border-color: #444 !important;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      }
    </style>
    <div class="carousels text-center m-4">
      <div class="musicians-carousel row justify-content-center">
        <div class="musicians-carousel-heading text-center">
          <h2>New Faces</h2>
        </div>
        <% @new_musicians = Musician.last(3) %>
        <div class="row justify-content-center align-items-stretch">
          <% if @new_musicians.any? %>
            <% @new_musicians.each do |musician| %>
              <div class="col-8 col-md-3 m-2">
                <div class="musician-card position-relative">
                  <%= link_to musician_path(musician), class: "text-light text-decoration-none stretched-link", data: { turbo: false } do %>
                    <div class="musician-card-header">
                      <% if musician.media.attached? %>
                        <% first_file = musician.media.first %>
                        <% if first_file.content_type.start_with?("image") %>
                          <%= cl_image_tag(first_file.key, class: "musician-avatar") %>
                        <% end %>
                      <% else %>
                        <%= image_tag "musician_placeholder.jpg", class: "musician-avatar" %>
                      <% end %>
                      <div class="musician-card-name-wrapper">
                        <h4 class="musician-card-name"><%= musician.name %></h4>
                      </div>
                    </div>
                    <div class="musician-card-details">
                      <p><i class="fa-solid fa-location-dot"></i> <%= musician.location %></p>
                      <p><i class="fa-solid fa-guitar"></i> <%= musician.instrument %></p>
                      <p><i class="fa-solid fa-music"></i> <%= musician.styles %></p>
                      <p><i class="fa-solid fa-pen-to-square"></i> <%= musician.bio %></p>
                    </div>
                  <% end %>
                  <%= button_to "Message", create_or_show_direct_messages_path(recipient_id: musician.user_id), method: :post, class: "btn btn-primary", style: "background-color: #a4fe35ff;", data: { turbo: false } %>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </div>
      <div class="venues-carousel row justify-content-center">
        <div class="venues-carousel-heading text-center">
          <h2>New Places</h2>
          <% @new_venues = Venue.last(3) %>
          <div class="row justify-content-center align-items-stretch">
            <% if @new_venues.any? %>
              <% @new_venues.each do |venue| %>
                <div class="col-8 col-md-3 m-2">
                  <div class="musician-card position-relative">
                    <%= link_to venue_path(venue), class: "text-light text-decoration-none stretched-link", data: { turbo: false } do %>
                      <div class="musician-card-header">
                        <div class="musician-card-name-wrapper">
                          <h4 class="musician-card-name"><%= venue.name %></h4>
                        </div>
                      </div>
                      <div class="musician-card-details">
                        <p><i class="fa-solid fa-location-dot"></i> <%= venue.address %></p>
                      </div>
                    <% end %>
                  </div>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
