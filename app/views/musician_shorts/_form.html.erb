<%= form_with model: short,
              url: short.persisted? ? musician_short_path(musician, short) : musician_shorts_path(musician),
              method: short.persisted? ? :patch : :post,
              data: { controller: "video-upload", turbo: false } do |form| %>

  <% if short.errors.any? %>
    <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
      <h4 style="color: #ef4444; font-size: 0.9rem; margin: 0 0 8px 0;"><%= pluralize(short.errors.count, "error") %> prevented this short from being saved:</h4>
      <ul style="color: #fca5a5; font-size: 0.85rem; margin: 0; padding-left: 20px;">
        <% short.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div style="margin-bottom: 20px;">
    <%= form.label :title, style: "display: block; color: #fff; font-size: 0.9rem; font-weight: 500; margin-bottom: 8px;" %>
    <%= form.text_field :title,
                        style: "width: 100%; padding: 12px 16px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 8px; color: #fff; font-size: 1rem; outline: none;",
                        placeholder: "Give your short a title",
                        maxlength: 100 %>
  </div>

  <div style="margin-bottom: 20px;">
    <%= form.label :description, style: "display: block; color: #fff; font-size: 0.9rem; font-weight: 500; margin-bottom: 8px;" %>
    <%= form.text_area :description,
                       style: "width: 100%; padding: 12px 16px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 8px; color: #fff; font-size: 1rem; outline: none; resize: vertical; min-height: 80px;",
                       placeholder: "Add a description (optional)",
                       rows: 3 %>
  </div>

  <div style="margin-bottom: 20px;">
    <%= form.label :video, style: "display: block; color: #fff; font-size: 0.9rem; font-weight: 500; margin-bottom: 8px;" %>
    <%= form.file_field :video,
                        accept: "video/mp4,video/webm,video/quicktime",
                        style: "width: 100%; padding: 12px 16px; background: #2a2a2a; border: 1px solid #3a3a3a; border-radius: 8px; color: #fff; font-size: 0.9rem;",
                        data: {
                          video_upload_target: "input",
                          action: "change->video-upload#preview"
                        } %>
    <small style="display: block; color: #888; font-size: 0.8rem; margin-top: 8px;">MP4, WebM, or MOV (max 200MB)</small>

    <div data-video-upload-target="preview" style="display: none; margin-top: 16px;">
      <video controls data-video-upload-target="previewVideo" style="width: 100%; max-width: 200px; border-radius: 8px;"></video>
    </div>
  </div>

  <div style="display: flex; gap: 12px; margin-top: 24px;">
    <%= form.submit short.persisted? ? "Update Short" : "Upload Short",
                    style: "flex: 1; padding: 12px 24px; background: #C8E938; color: #171717; border: none; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.2s ease;",
                    data: { video_upload_target: "submitButton" },
                    onmouseover: "this.style.filter='brightness(1.15)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(200, 233, 56, 0.4)';",
                    onmouseout: "this.style.filter=''; this.style.transform=''; this.style.boxShadow='';" %>
    <%= link_to "Cancel", musician_path(musician),
                style: "padding: 12px 24px; background: #2a2a2a; color: #fff; border-radius: 8px; text-decoration: none; font-size: 1rem; font-weight: 500; text-align: center; transition: all 0.2s ease;",
                onmouseover: "this.style.filter='brightness(1.3)'; this.style.transform='translateY(-1px)';",
                onmouseout: "this.style.filter=''; this.style.transform='';" %>
  </div>
<% end %>
