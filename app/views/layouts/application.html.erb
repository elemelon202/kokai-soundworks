<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for?(:title) ? "#{yield(:title)} | Kokai Soundworks" : "Kokai Soundworks" %></title>
    <meta name="description" content="<%= content_for?(:description) ? yield(:description) : "Connect bands, venues, and fans in Japan's music scene. Community-funded gigs, band discovery, and live music made accessible." %>">

    <%# Open Graph Meta Tags %>
    <meta property="og:title" content="<%= content_for?(:title) ? "#{yield(:title)} | Kokai Soundworks" : "Kokai Soundworks" %>">
    <meta property="og:description" content="<%= content_for?(:description) ? yield(:description) : "Connect bands, venues, and fans in Japan's music scene. Community-funded gigs, band discovery, and live music made accessible." %>">
    <meta property="og:type" content="<%= content_for?(:og_type) ? yield(:og_type) : "website" %>">
    <meta property="og:url" content="<%= request.original_url %>">
    <meta property="og:image" content="<%= content_for?(:og_image) ? yield(:og_image) : "#{request.base_url}/android-icon-192x192.png" %>">
    <meta property="og:site_name" content="Kokai Soundworks">
    <meta property="og:locale" content="en_US">

    <%# Twitter Card Meta Tags %>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= content_for?(:title) ? "#{yield(:title)} | Kokai Soundworks" : "Kokai Soundworks" %>">
    <meta name="twitter:description" content="<%= content_for?(:description) ? yield(:description) : "Connect bands, venues, and fans in Japan's music scene. Community-funded gigs, band discovery, and live music made accessible." %>">
    <meta name="twitter:image" content="<%= content_for?(:og_image) ? yield(:og_image) : "#{request.base_url}/android-icon-192x192.png" %>">

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <style>
      html, body {
        max-width: 100vw;
        overflow-x: hidden;
      }

      /* Hero title font */
      .hero-title-container > div {
        font-family: Impact, 'Arial Black', Haettenschweiler, sans-serif !important;
        font-weight: 900 !important;
      }

      @media (max-width: 768px) {
        /* Mobile navbar fixes */
        .navbar-lewagon {
          padding: 4px 8px !important;
        }

        .navbar-lewagon .navbar-brand img {
          width: 28px !important;
          height: 28px !important;
        }

        .navbar-lewagon .navbar-collapse {
          z-index: 9999 !important;
        }

        .navbar-lewagon .dropdown-menu {
          position: static !important;
          z-index: 10000 !important;
          background: #2a2a2a !important;
        }

        /* Hero section mobile */
        .hero-section {
          padding: 20px 12px !important;
          min-height: auto !important;
        }

        .hero-content {
          text-align: center !important;
        }

        .hero-title-container > div {
          font-size: 2.5rem !important;
          line-height: 1 !important;
        }

        .hero-tagline-row {
          flex-direction: column !important;
          align-items: center !important;
          gap: 6px !important;
        }

        .hero-cta-row {
          flex-direction: column !important;
          width: 100% !important;
        }

        .hero-cta-row a {
          width: 100% !important;
          text-align: center !important;
          justify-content: center !important;
        }

        .hero-stats-row {
          gap: 16px !important;
        }

        .hero-stats-row > div > div:first-child {
          font-size: 1.2rem !important;
        }

        /* Winner cards */
        .mainstage-spotlight {
          padding: 0 8px !important;
        }

        .mainstage-spotlight .winner-card {
          min-width: unset !important;
          max-width: 100% !important;
          width: 100% !important;
        }
      }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.bootstrap5.min.css" rel="stylesheet">
    <%# ====================================================================== %>
    <%# MAPBOX GL JS - Interactive map library for displaying venue locations %>
    <%# Loaded from CDN for better caching and simpler setup                  %>
    <%# ====================================================================== %>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.3.0/mapbox-gl.js"></script>

    <%# ====================================================================== %>
    <%# FLATPICKR - Date picker for gig scheduling                            %>
    <%# Must load BEFORE importmap so it's available to Stimulus controllers  %>
    <%# ====================================================================== %>
    <link href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/themes/dark.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.13/dist/flatpickr.min.js"></script>

    <%= javascript_importmap_tags %>
  </head>

  <body class="<%= content_for?(:body_class) ? yield(:body_class) : '' %>"><%= render "shared/navbar" %>
<%= render "shared/flashes" %>

    <%= yield %>
  </body>
</html>
